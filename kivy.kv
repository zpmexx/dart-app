##:import Buttons main.Buttons

WindowManager:
    MainWindow:
    SoloWindow:
    GroupWindow:
    # LoginWindow:
    GameWindow:
    ChoosePlayers:
    ScoreBoard:
    Solo180701:
    MinmaxWindow:
    SoloScoreBoard:
    Database:
    Records:
    RandomTraining:

<MainWindow>:
    solobutton: solobutton
    name: "main"
    size: root.width,root.height
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'background.jpg'
    GridLayout:
        cols: 1
        size_hint: .4,.4
        pos_hint: {'x': 0.3 , 'y': 0.3}
        spacing: '20dp'
        Button:
            text: "Gry Solo"
            id:solobutton
            background_color: (1.0, 0.0, 0.0, 1.0)
            # size_hint: 0.3, 0.3
            on_release: 
                app.root.current = "solo";root.manager.transition.direction = "left"   
        Button:
            text: "Gry drużynowe"
            background_color: (1.0, 0.0, 0.0, 1.0)
            # size_hint: 0.3, 0.3
            # on_release: app.root.current = "group"
            on_release:app.root.current = "chooseplayers";root.manager.transition.direction = "left"

<ChoosePlayers>:
    playerGrid: playerGrid
    chooseGrid: chooseGrid
    gamesGrid: gamesGrid
    cb180: cb180
    cb301: cb301
    cb501: cb501
    cbmin: cbmin
    cbmax: cbmax
    cb180e: cb180e
    cb301e: cb301e
    cb501e: cb501e
    confirmButton: confirmButton
    name: "chooseplayers"
    on_pre_enter: root.create()
    GridLayout:
        cols: 1
        # size_hint: 1,1
        spacing: '50dp'
        GridLayout:
            id: gamesGrid
            cols: 8
            Label:
                text:'180'
            Label:
                text:'301'
            Label:
                text:'501'
            Label:
                text:'MIN'
            Label:
                text:'MAX'
            Label:
                text:'180e'
            Label:
                text:'301e'
            Label:
                text:'501e'
            CheckBox:
                id: cb180
                name: "cb180"
                active: True
                allow_no_selection: False
                color: 0.4,0.3,0.2,1
                group: "gameCheckBox"
            CheckBox:
                id: cb301
                name: "cb301"
                allow_no_selection: False
                color: 0.4,0.3,0.2,1
                group: "gameCheckBox"
            CheckBox:
                id: cb501
                name: "cb501"
                allow_no_selection: False
                color: 0.4,0.3,0.2,1
                group: "gameCheckBox"
            CheckBox:
                id: cbmin
                name: "cbmin"
                allow_no_selection: False
                color: 0.4,0.3,0.2,1
                group: "gameCheckBox"
            CheckBox:
                id: cbmax
                name: "cbmax"
                allow_no_selection: False
                color: 0.4,0.3,0.2,1
                group: "gameCheckBox"
            CheckBox:
                id: cb180e
                name: "cb180e"
                allow_no_selection: False
                color: 0.4,0.3,0.2,1
                group: "gameCheckBox"
            CheckBox:
                id: cb301e
                name: "cb301e"
                allow_no_selection: False
                color: 0.4,0.3,0.2,1
                group: "gameCheckBox"
            CheckBox:
                id: cb501e
                name: "cb501e"
                allow_no_selection: False
                color: 0.4,0.3,0.2,1
                group: "gameCheckBox"

        GridLayout:
            id: chooseGrid
            name: 'chooseGrid'
            cols: 7
        GridLayout:
            id: playerGrid
            name: "playerGrid"
            cols: 4
        GridLayout:
            cols: 2
            Button:
                text: "Zatwierdź"
                name: "confirmButton"
                id: confirmButton
                disabled: 'True'   
                color:
                # on_release: root.saveNames()
                on_press: root.validatePlayers()
                # on_press: app.root.current = "game";root.manager.transition.direction = "left"   
            Button:
                text: "Powrót"
                color:
                # on_release: root.clear();app.root.current = "main";root.manager.transition.direction = "right"   
                # on_release: app.root.current = "main"; root.manager.transition.direction = "right"    
                on_release: root.backFunction()  
                    
            
        
<SoloWindow>:
    name: "solo"
    size: root.width,root.height
    # on_enter: root.printhi()
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'background.jpg'
    GridLayout:
        cols: 1
        size_hint: .6,.6
        pos_hint: {'x': 0.2 , 'y': 0.2}
        spacing: '10dp'
        GridLayout:
            cols: 2
            rows: 4
            # size_hint: .6,.6
            # pos_hint: {'x': 0.2 , 'y': 0.2}
            # size_hint: 0.5,0.5
            spacing: '10dp'
            Button:
                text: "180"
                color: 0.4,0.3,0.2,1
                on_release: root.choose(0)
            Button:
                text: "301"
                color: 0.4,0.3,0.2,1
                on_release: root.choose(1)
                background_colour: 1,1,1,1
            Button:
                text: "501"
                color: 0.4,0.3,0.2,1
                on_release: root.choose(2)
            Button:
                text: "701"
                color: 0.4,0.3,0.2,1
                on_release: root.choose(3)
            Button:
                text: "Min"
                color: 0.4,0.3,0.2,1
                on_release: root.choose(4)
            Button:
                text: "Max"
                color: 0.4,0.3,0.2,1
                on_release: root.choose(5)
            Button:
                text: "Trening"
                color: 0.4,0.3,0.2,1
                on_release: root.choose(6)
            Button:
                text: "Trening losowy"
                color: 0.4,0.3,0.2,1
                on_release: root.choose(7)

        Button:
            text: "Rekordy"
            # font_size: self.width / 15
            size_hint_y: 0.35
            on_release: 
                app.root.current = "records"       
                root.manager.transition.direction = "right"     

        Button:
            text: "Baza danych"
            # font_size: self.width / 15
            size_hint_y: 0.35
            on_release: 
                app.root.current = "database"       
                root.manager.transition.direction = "left"     
        Button:
            text: "Powrót"
            # font_size: self.width / 15
            size_hint_y: 0.35
            on_release: 
                app.root.current = "main"       
                root.manager.transition.direction = "right"        

<LoginWindow>:
    errorLabel: errorLabel
    passwordLabel: passwordLabel
    usernameInput: usernameInput
    passwordInput: passwordInput

    name: "login"
    size: root.width,root.height
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'background.jpg'
    GridLayout:

        cols: 1
        size_hint: .6,.6
        pos_hint: {'x': 0.2 , 'y': 0.2}
        spacing: '10dp'

        Label:
            name: "usernameLabel"
            text: "Użytkownik"
            color:
            # text_size: self.size
            font_size: root.width / 20 + 10
            # halign: "left"
            # valign: "middle"

        TextInput:
            id: usernameInput
            name: "usernameInput"
            hint_text:
            multiline: False

        Label:
            id: passwordLabel
            name: "passwordLabel"
            text: "Hasło"
            color:
            font_size: root.width / 20 + 10
            background_color: 1,1,1,1

        TextInput:
            id: passwordInput
            password: True
            name: "passwordInput"
            hint_text:
            multiline: False

        Label:
            id: errorLabel
            name: "errorLabel"
            text: ""
            color:

        Button:
            text: "Zaloguj"
            on_press: 
                if usernameInput.text != 'Ziemo': root.badUsernameMessage()
                
                elif passwordInput.text != 'Ziemo': root.badPasswordMessage()
                else: app.root.current = "solo";usernameInput.text = passwordInput.text = errorLabel.text = "";root.manager.transition.direction = "left"
            

<P>:
    cancel: cancel
    popupInput: popupInput
    # size_hint: 1,.5
    # pos_hint: {'x': 0 , 'y': 0.5}
    size: root.width,root.height
    GridLayout:
        cols: 1
    TextInput:
        id: popupInput
        name: 'popupInput'
        multiline: False
        size_hint: 1,.4
        pos_hint: {'x':0 , 'y':0.5 }
    Button:
        size_hint: 1,.4
        pos_hint: {'x':0 , 'y':0.0 }
        text: "Wyślij"
        color:
        id: cancel
        # on_press:  app.root.current = "game";
        on_press: root.checkempty()
            

<GroupWindow>:
    popupInput: popupInput
    pop: pop
    name: "group"
    grid: grid
    size: root.width,root.height
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'background.jpg'
    Popup:
        id: pop
        name: 'pop'
        title: 'Wpisz liczbe graczy'
        size_hint: 1,.5
        pos_hint: {'x': 0 , 'y': 0.5}
        GridLayout:
            cols: 2    
            TextInput:
                id: popupInput
                name: 'popupInput'
                multiline: False
            Button:
                text: "Wyślij"
                color:
                id: popupButton
                on_press:  root.popDismiss()
    GridLayout:
        id: grid
        cols: 2
        size_hint: 1,.5
        pos_hint: {'x': 0 , 'y': 0.5}
        spacing: '10dp'
    Buttons:



<GameWindow>:
    name: "game"
    usersGrid: usersGrid
    # testlab: testlab
    # size: root.width,root.height
    size_hint: 1, 1
    on_enter: root.create()
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'background.jpg'
    Navbar:
        id: 'navbar'
    GridLayout:
        size_hint: 1, 0.4
        pos_hint: {'x':0 , 'y':0.4 }
        cols: 2
        id: usersGrid
        name: "usersGrid"  
    Buttons:

<ScoreBoard>:
    scoreboardGrid: scoreboardGrid
    name: "scoreboard"
    on_enter: root.create()
    size_hint: 1, 1
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'background.jpg'
    GridLayout:
        size_hint: 1, 0.6
        pos_hint: {'x':0 , 'y':0.3 }
        id: scoreboardGrid
        name: "scoreboardGrid"  
        cols: 3
        spacing: '20dp'
    
    Button:
        text:'Powrót'
        # on_release:app.root.current = "main";root.manager.transition.direction = "left"
        on_release: root.backFunction()
        size_hint: 1,0.2 

<Solo180701>:
    name: "solo180701"
    statsGrid: statsGrid
    countLabel: countLabel
    leftLabel: leftLabel
    avgLabel: avgLabel
    size_hint: 1, 1
    on_enter: root.create()
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'background.jpg'
    GridLayout:
        size_hint: 1, 0.5
        pos_hint: {'x':0 , 'y':0.5 }
        cols: 3
        id: statsGrid
        name: "statsGrid"  

        Label:
            text: "Pozostało"
            color:

        Label:
            text: "Liczba rzutów"
            color:        
        
        Label:
            text: "Średnia rzutu"
            color:

        Label:
            id: leftLabel
            name: "leftLabel"
            text: ""
            color:

        Label:
            id: countLabel
            name: "countLabel"       
            text: "0"
            color:

        Label:
            id: avgLabel
            name: "avgLabel"        
            text: "0"
            color:
    Buttons:

<MinmaxWindow>:
    name: "minmaxwindow"
    leftLabel: leftLabel
    avgLabel: avgLabel
    statsGrid: statsGrid
    thrownGrid: thrownGrid
    sumLabel: sumLabel
    size_hint: 1, 1
    on_enter: root.create()
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'background.jpg'
    GridLayout:
        size_hint: 1, 0.3
        pos_hint: {'x':0 , 'y':0.7 }
        cols: 3
        id: statsGrid
        name: "statsGrid"  

        Label:
            text: "Pozostało"
            color:

        Label:
            text: "Średnia rzutów"
            color:   
        
        Label:
            text: "Suma"
            color:   
    
        Label:
            id: leftLabel
            name: "leftLabel"
            text: "20"
            color:

        Label:
            id: avgLabel
            name: "avgLabel"        
            text: "0"
            color:

        Label:
            id: sumLabel
            name: "sumLabel"        
            text: "0"
            color:
        
    GridLayout:
        size_hint: 1, 0.3
        pos_hint: {'x':0 , 'y':0.4 }
        cols: 10
        id: thrownGrid
        name: "thrownGrid" 


    Buttons:


<SoloScoreBoard>:
    soloscoreboardGrid: soloscoreboardGrid
    name: "soloscoreboard"
    on_enter: root.create()
    size_hint: 1, 1
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'background.jpg'
    GridLayout:
        size_hint: 1, 0.6
        pos_hint: {'x':0 , 'y':0.3 }
        id: soloscoreboardGrid
        name: "soloscoreboardGrid"  
        cols: 2
        spacing: '20dp'
    
    GridLayout:  
        cols: 2
        size_hint: 1,0.2  
        Button:
            text: 'Zapisz wynik'
            on_release: root.saveFunction()
                
        Button:
            text:'Powrót'
            # on_release:app.root.current = "main";root.manager.transition.direction = "left"
            on_release: root.backFunction()



<Records>:
    name: "records"
    size_hint: 1, 1
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'background.jpg'

<Database>:
    userInput: userInput
    gameSpinner: gameSpinner
    databaseGrid: databaseGrid
    name: "database"
    size_hint: 1, 1
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'background.jpg'
    GridLayout:
        cols:3
        size_hint: 0.8, 0.2
        pos_hint: {'x': 0.1, 'y': 0.8}
        spacing: '20dp'
        Spinner:
            size_hint: 1, 1
            id: gameSpinner
            text: "Wybierz gre"
            values: ["180","301","501","701","Min","Max"]
            # on_text: root.spinner(gameSpinner.text)
    

        TextInput:
            id: userInput
            name: "userInput"            
            hint_text: 'Nazwa użytkownika'
            multiline: False
        
        Button:
            text: "Szukaj"
            on_press: root.find()
    GridLayout:
        id: databaseGrid
        size_hint: 0.8, 0.6
        pos_hint: {'x': 0.1 , 'y':0.2 }

    Button:
        size_hint: 0.8, 0.2
        pos_hint: {'x': 0.1 , 'y':0 }
        text: "Powrót"
        color:    
        on_release: root.backFunction()

<RandomTraining>
    name: "randomtraining"    
    leftLabel: leftLabel
    accuracyLabel: accuracyLabel
    targetLabel: targetLabel
    missButton: missButton
    hutButton: hitButton
    rewindButton: rewindButton

    size_hint: 1, 1
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'background.jpg'


    GridLayout:
        id: navbarGrid
        cols: 3
        size_hint: 1, 0.2
        pos_hint: {'x':0 , 'y':0.8}
        Label:
            text:'Pozostało'
        Label:
            text:'Skuteczność'
        Label:
            text:'Cel'
    
    GridLayout:
        id: statsGrid
        cols: 3
        size_hint: 1, 0.4
        pos_hint: {'x':0 , 'y':0.6}
        Label:
            text:'20'
            name: "leftLabel"
            id: leftLabel
        Label:
            text:'0%'
            name: "accuracyLabel"
            id: accuracyLabel
        Label:
            text:''
            name: "targetLabel"
            id: targetLabel

    GridLayout:
        id: buttonsGrid
        name: "buttonsGrid"
        cols: 3
        size_hint: 1, 0.3

        Button:
            text: "Trafiony"
            color:
            id: hitButton
            name: "hitButton"
        
        Button:
            text: "Chybiony"
            color:
            id: missButton
            name: "missButton"
        
        Button:
            text: "Cofnij"
            color:
            id: rewindButton
            name: "rewindButton"
        
    

            
